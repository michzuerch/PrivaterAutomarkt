{"remainingRequest":"/home/user/Source/PrivaterAutomarkt/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/user/Source/PrivaterAutomarkt/src/pages/Infinity.vue?vue&type=style&index=0&id=2350a268&scoped=true&lang=css&","dependencies":[{"path":"/home/user/Source/PrivaterAutomarkt/src/pages/Infinity.vue","mtime":1610639869136},{"path":"/home/user/Source/PrivaterAutomarkt/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/user/Source/PrivaterAutomarkt/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/user/Source/PrivaterAutomarkt/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/user/Source/PrivaterAutomarkt/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/user/Source/PrivaterAutomarkt/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.fade-enter-active,\n.fade-leave-active {\n  transition: ease opacity 0.3s;\n}\n.fade-enter,\n.fade-leave-to {\n  opacity: 0;\n}\n",{"version":3,"sources":["Infinity.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Infinity.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <Layout>\n    <content-header\n      :title=\"$static.metadata.siteName\"\n      :sub=\"$static.metadata.siteDescription\"\n      image=\"phoenix-han-Nqdh0G8rdCc-unsplash.jpg\"\n    ></content-header>\n\n    <div class=\"container mx-auto\">\n      <transition-group name=\"fade\" class=\"flex flex-wrap my-4\" tag=\"div\">\n        <FeaturedCard\n          key=\"featured_post\"\n          v-if=\"$page.featured.totalCount>0\"\n          :records=\"$page.featured.edges\"\n        />\n        <CardItem v-for=\"{ node } of loadedPosts\" :key=\"node.id\" :record=\"node\" />\n      </transition-group>\n      <ClientOnly>\n        <infinite-loading @infinite=\"infiniteHandler\" spinner=\"spiral\">\n          <div slot=\"no-more\"></div>\n          <div slot=\"no-results\"></div>\n        </infinite-loading>\n      </ClientOnly>\n    </div>\n  </Layout>\n</template>\n\n<page-query>\n  query($page: Int) {\n    featured: allBlog(limit: 4, filter: { featured: { eq: true } }, sortBy:\"created\") {\n      totalCount\n      edges {\n        node {\n          id\n          title\n          image(width: 800)\n          path\n          timeToRead\n          humanTime: created(format: \"DD MMM YYYY\")\n          datetime: created\n          category {\n            id\n            title\n            path\n          }\n          author {\n            id\n            name\n            image(width: 64, height: 64, fit: inside)\n            path\n          }\n        }\n      }\n    }\n    entries: allBlog(perPage: 6, page: $page, sortBy:\"created\") @paginate {\n      totalCount\n      pageInfo {\n        totalPages\n        currentPage\n      }\n      edges {\n        node {\n          id\n          title\n          image(width: 800)\n          path\n          timeToRead\n          featured\n          humanTime: created(format: \"DD MMM YYYY\")\n          datetime: created\n          category {\n            id\n            title\n            path\n          }\n          author {\n            id\n            name\n            image(width: 64, height: 64, fit: inside)\n            path\n          }\n        }\n      }\n    }\n  }\n</page-query>\n\n<static-query>\nquery {\n  metadata {\n    siteName\n    siteDescription\n  }\n}\n</static-query>\n\n<script>\nimport CardItem from \"~/components/Content/CardItem.vue\";\nimport FeaturedCard from \"~/components/Content/FeaturedCard.vue\";\nimport ContentHeader from \"~/components/Partials/ContentHeader.vue\";\n\nexport default {\n  metaInfo: {\n    title: \"Hello, world!\"\n  },\n  components: {\n    CardItem,\n    FeaturedCard,\n    ContentHeader\n  },\n\n  data() {\n    return {\n      loadedPosts: [],\n      currentPage: 1\n    };\n  },\n  created() {\n    this.loadedPosts.push(...this.$page.entries.edges);\n  },\n  methods: {\n    async infiniteHandler($state) {\n      if (this.currentPage + 1 > this.$page.entries.pageInfo.totalPages) {\n        $state.complete();\n      } else {\n        const { data } = await this.$fetch(`/infinity/${this.currentPage + 1}`);\n        if (data.entries.edges.length) {\n          this.currentPage = data.entries.pageInfo.currentPage;\n          this.loadedPosts.push(...data.entries.edges);\n          $state.loaded();\n        } else {\n          $state.complete();\n        }\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.fade-enter-active,\n.fade-leave-active {\n  transition: ease opacity 0.3s;\n}\n.fade-enter,\n.fade-leave-to {\n  opacity: 0;\n}\n</style>"]}]}